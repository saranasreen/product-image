<!DOCTYPE html>
<html>
<head>
<style type="text/css">
	html,
body {
    height: 100%;
}

/* Scale canvas with resize attribute to full size */
canvas[resize] {
    width: 100%;
    height: 100%;
    background-color: "f8f8f8";
    position: absolute;
}
</style>
<!-- Load the Paper.js library -->
<script type="text/javascript" src="node_modules/paper/dist/paper-full.js"></script>
<!-- Define inlined PaperScript associate it with myCanvas -->

</head>
<body>
    <section id="controls">

        <div id="inputelements">
    
            <div class="row">
    
                <span class="inputfield">
                    <label for="colorInput">Color mode</label>
                    <select id="colorInput">
                        <option value="black">black</option>
                        <option selected = "selected" value="blue">blue</option>
                        <option value="green">green</option>
                        <option value="grey">grey</option>
                        <option value="olive">olive</option>
                        <option value="orange">orange</option>
                        <option value="red">red</option>
                        <option value="white">white</option>
                        <option value="yellow">yellow</option>
                    </select>
                </span>

                <span class="inputfield">
                    <label for="sizeInput">Size</label>
                    <select id="sizeInput">
                        <option selected = "selected" value="11.5">11.5 mm / 0.45 in</option>
                        <option value="13.5">13.5 mm / 0.53 in</option>
                        <option value="15">15 mm / 0.6 in</option>
                        <option value="17">17 mm / 0.66 in</option>
                        <option value="18">18 mm / 0.7 in</option>
                    </select>
                </span>
    
            </div>
        </div>
    
    </section>
    
    <canvas id="bgCanvas" resize></canvas>
    <canvas id="myCanvas" resize></canvas> 
	
          
    <script type="text/javascript">
        paper.install(window);
        window.onload = function() {
            var scope = new paper.PaperScope();
            var scope2 = new paper.PaperScope();
                    
            var canvas_1 = document.getElementById('bgCanvas');
            scope.setup(bgCanvas)
            var canvas_2 = document.getElementById('myCanvas');
            scope2.setup(myCanvas)
                    
            scope.activate();
            var frame_size = new Size(scope.view.bounds.width, scope.view.bounds.height)
            var frame_top_left = new Point(scope.view.bounds.x, scope.view.bounds.y)
            var bg = new Rectangle(frame_top_left, frame_size);
            var bgPath = new Path.Rectangle(bg);
            bgPath.fillColor = '#789'

            
            
            scope2.activate();

            
            var pla_colors = {
                'black': '#000',
                'blue': '#009',
                'green': '#033',
                'grey': '#708090',
                'olive': '#bdb76b',
                'orange': '#f63',
                'red': '#f30',
                'white': '#f5f5f5',
                'yellow': '#ffd700'

            }


            //scope2.project.clear()

            

            var c = new Path.Circle(scope2.view.center, scope2.view.bounds.width / 2)
            c.fillColor = pla_colors['blue']

            
            scope2.project.importSVG('img/standard/layers/11.5/raw/ISO-Rendered.svg', function(item) {
                item.fitBounds(scope2.view.bounds)
                item.position = scope2.view.center
                item.blendMode = 'destination-atop'
                
                
                /*
                var c = new Path.Circle(scope2.view.center, item.bounds.width / 2)
                c.fillColor = pla_colors['blue']
                var clipper = new Group(item,c)
                clipper.clipped = true*/

                scope2.project.importSVG('img/standard/layers/11.5/raw/ISO-Rendered.svg', function(item2) {
                    item2.fitBounds(scope2.view.bounds)
                    item2.position = scope2.view.center
                    item2.blendMode = 'multiply'

                    scope2.project.importSVG('img/standard/layers/11.5/raw/stem-shadow.svg', function(item3) {
                        item3.fitBounds(scope2.view.bounds)
                        item3.position = new Point(scope2.view.center.x+2, scope2.view.center.y -5)

                        function colorSelect(){
                            c.fillColor = pla_colors[this.value]
                            if(this.value=='black' ){
                                item2.blendMode = 'hard-light'
                            } else if(this.value=='white' ){
                                item2.blendMode = 'average'
                            } else {
                                item2.blendMode = 'multiply'
                            }
                        
                        }

                        function sizeSelect(){
                            console.log('change')
                            /*
                            var string = 'img/standard/layers/' + this.value + '/raw/ISO-Rendered.svg'
                            item = scope2.project.importSVG(string)
                            item.fitBounds(scope2.view.bounds)
                            item.position = scope2.view.center
                            item.blendMode = 'destination-atop'
                            item2.source = string
                            var string2 = 'img/standard/layers/' + this.value + '/raw/stem-shadow.svg'
                            item3.source = string2*/
                        }
                
                        document.getElementById("colorInput").onchange = colorSelect
                        document.getElementById("sizeInput").onchange = sizeSelect
                    });
                });
            });

        


            /*
            'normal', 'multiply', 'screen', 'overlay', 'soft-light',
            'hard-light', 'color-dodge', 'color-burn', 'darken',
            'lighten', 'difference', 'exclusion', 'hue', 'saturation',
            'luminosity', 'color', 'add', 'subtract', 'average',
            'pin-light', 'negation', 'source-over', 'source-in',
            'source-out', 'source-atop', 'destination-over', 'destination-in',
            'destination-out', 'destination-atop', 'lighter', 'darker',
            'copy', 'xor'
            */

            
    
        }
    </script> 
</body>
</html>